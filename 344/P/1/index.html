<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Pirate Ship</title>
    <link rel="stylesheet" type="text/css" href="main.css">
  </head>
  <body onload="init()">
      <canvas align="center" id="canvas-gl" width="500" height="500">
        Your browser does not support WebGL.
      </canvas>
    <img width="0" height="0" id="box-tex" src="textures/box.png">
    <img width="0" height="0" id="sea-tex" src="textures/sea.png">
    <img width="0" height="0" id="sky-tex" src="textures/sky.jpg">
    <img width="0" height="0" id="ship-tex" src="textures/wood.jpg">
    <img width="0" height="0" id="skin-tex" src="textures/skin.jpg">
  </body>
  <script id="shader-vs" type="text/plain">
  precision mediump float;
  attribute vec3 vertPosition;
  attribute vec2 vertTexCoord;
  attribute vec3 vertNormal;

  varying vec2 fragTexCoord;
  varying vec3 fragNormal;

  uniform mat4 mWorld;
  uniform mat4 mView;
  uniform mat4 mProj;

  void main() {
    fragTexCoord = vertTexCoord;
    fragNormal = (mWorld * vec4(vertNormal, 0.0)).xyz * vec3(1.0,1.0,-1.0);
    gl_Position = mProj * mView * mWorld * vec4(vertPosition, 1.0);
  }
  </script>
  <script id="shader-fs" type="text/plain">
    precision mediump float;

    varying vec2 fragTexCoord;
    varying vec3 fragNormal;
    uniform sampler2D sampler;

    void main() {

      vec3 ambientLightIntensity = vec3(0.7,0.7,0.7);
      vec3 sunlightIntensity = vec3(0.5,0.5,0.5);
      vec3 sunlightDirection = normalize(vec3(1.0, 1.0, 1.0));
      vec3 surfaceNormal = normalize(fragNormal);

      vec4 texel = texture2D(sampler, fragTexCoord);

      vec3 lightIntensity = ambientLightIntensity + sunlightIntensity*max(dot(fragNormal, sunlightDirection),0.0);
      gl_FragColor = vec4(texel.rgb * lightIntensity, texel.a);
    }
  </script>
  <script type="text/javascript" src="utils/gl-matrix-min.js"></script>
  <script type="text/javascript" src="main.js"></script>
</html>
